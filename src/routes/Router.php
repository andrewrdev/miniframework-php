<?php

namespace src\routes;

class Router extends Web
{

    public function __construct()
    {
        $this->run();
    }

    // -----------------------------------------------------------------------------------------------------------------

    // -----------------------------------------------------------------------------------------------------------------
    protected function getUrl()
    {
        if (!isset($_GET['url']) && empty($_GET['url'])) 
        {
            $_GET['url'] = 'index';
        }

        $url = explode('/', $_GET['url']);

        return $url[0];
    }
    // -----------------------------------------------------------------------------------------------------------------

    // -----------------------------------------------------------------------------------------------------------------
    protected function run()
    {
        foreach ($this->routes() as $key => $route) 
        {
            if ($this->getUrl() === $route['route']) 
            {
                $class = 'src\\controllers\\' . ucfirst($route['controller']);
                $action = $route['action'];
                $controller = new $class;
                $controller->$action();
            }
        }
    }
    // -----------------------------------------------------------------------------------------------------------------
    
    // -----------------------------------------------------------------------------------------------------------------

}
